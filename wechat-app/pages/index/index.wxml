<view class="container">
  <!-- 顶部欢迎区 -->
  <view class="welcome-section">
    <view class="welcome-text">
      <text class="greeting">{{greeting}}</text>
      <text class="username">{{userInfo.nickname || '美食家'}}</text>
    </view>
    <view class="new-badge" wx:if="{{newRecipesCount > 0}}">
      <text>{{newRecipesCount}}道新菜谱</text>
    </view>
  </view>

  <!-- 搜索栏 -->
  <view class="search-bar" bindtap="goToSearch">
    <image src="/images/search.png" mode="aspectFit" class="search-icon"/>
    <text class="search-placeholder">搜索菜谱、食材...</text>
  </view>

  <!-- 菜系筛选 -->
  <view class="cuisine-filter">
    <scroll-view scroll-x class="cuisine-scroll">
      <view class="cuisine-list">
        <view class="cuisine-item {{selectedCuisine === '' ? 'active' : ''}}" 
              bindtap="selectCuisine" data-cuisine="">
          <text>全部</text>
        </view>
        <view class="cuisine-item {{selectedCuisine === item ? 'active' : ''}}" 
              wx:for="{{cuisines}}" 
              wx:key="*this"
              bindtap="selectCuisine" 
              data-cuisine="{{item}}">
          <text>{{item}}</text>
        </view>
      </view>
    </scroll-view>
  </view>

  <!-- 菜谱列表 -->
  <view class="section-title">我的收藏</view>
  
  <view class="recipe-list" wx:if="{{recipes.length > 0}}">
    <view class="recipe-card" 
          wx:for="{{recipes}}" 
          wx:key="_id"
          bindtap="goToDetail"
          data-id="{{item._id}}">
      <image class="recipe-image {{!item.imageUrl ? 'no-image' : ''}}" 
             src="{{item.imageUrl || '/images/default-food.png'}}" 
             mode="aspectFill"/>
      <view class="recipe-info">
        <text class="recipe-name">{{item.name}}</text>
        <view class="recipe-meta">
          <text class="cuisine-tag">{{item.cuisine}}</text>
          <text class="cook-time" wx:if="{{item.cookTime}}">{{item.cookTime}}分钟</text>
        </view>
      </view>
      <view class="favorite-btn active" catchtap="unfavorite" data-id="{{item._id}}">
        <image src="/images/heart-filled.png" mode="aspectFit"/>
      </view>
    </view>
  </view>

  <!-- 空状态 -->
  <view class="empty-state" wx:elif="{{!loading}}">
    <image src="/images/empty-favorites.png" mode="aspectFit" class="empty-icon"/>
    <text class="empty-text">还没有收藏任何菜谱\n去市场发现美味吧！</text>
    <view class="btn btn-primary mt-20" bindtap="goToMarket">
      <text>去发现</text>
    </view>
  </view>

  <!-- 加载更多 -->
  <view class="loading-more" wx:if="{{loadingMore}}">
    <text>加载中...</text>
  </view>
  <view class="no-more" wx:if="{{noMore && recipes.length > 0}}">
    <text>没有更多菜谱了</text>
  </view>
</view>
